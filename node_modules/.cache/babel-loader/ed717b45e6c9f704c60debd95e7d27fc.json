{"ast":null,"code":"import _toConsumableArray from\"/Users/juliatuvaleva/Desktop/dev/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/juliatuvaleva/Desktop/dev/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import EditProfilePopup from'./EditProfilePopup';import EditAvatarPopup from'./EditAvatarPopup';import AddPlacePopup from'./AddPlacePopup';import ImagePopup from'./ImagePopup';import ConfirmationPopup from'./ConfirmationPopup';import React,{useEffect,useState}from'react';import{CurrentUserContext}from'../contexts/CurrentUserContext';import{api}from'../utils/api.js';import{escKey}from'../utils/constant.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cardsList=_useState2[0],setCards=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isEditProfilePopupOpen=_useState4[0],setEditProfilePopupOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAddPlacePopupOpen=_useState6[0],setAddPlacePopupOpen=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isEditAvatarPopupOpen=_useState8[0],setEditAvatarPopupOpen=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isDeleteConfirmPopupOpen=_useState10[0],setDeleteConfirmPopupOpen=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),selectedCard=_useState12[0],setSelectedCard=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),selectedCardDelete=_useState14[0],setSelectedCardDelete=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),currentUser=_useState16[0],setCurrentUser=_useState16[1];useEffect(function(){api.getProfileInfo().then(function(userData){setCurrentUser(userData);}).catch(function(error){console.log(error);});api.getInitialCards().then(function(cardsData){setCards(cardsData);}).catch(function(error){console.log(error);});},[]);useEffect(function(){var close=function close(e){if(e.keyCode===escKey){closeAllPopups();}};document.addEventListener('keydown',close);return function(){return document.removeEventListener('keydown',close);};},[]);function handleEditProfileClick(){setEditProfilePopupOpen(true);}function handleAddPlaceClick(){setAddPlacePopupOpen(true);}function handleEditAvatarClick(){setEditAvatarPopupOpen(true);}function handleDeleteButtonClick(card){setDeleteConfirmPopupOpen(true);setSelectedCardDelete(card);}function handleCardClick(card){setSelectedCard(card);}function closeAllPopups(){setEditProfilePopupOpen(false);setAddPlacePopupOpen(false);setEditAvatarPopupOpen(false);setDeleteConfirmPopupOpen(false);setSelectedCard(null);setSelectedCardDelete(null);}function handleUpdateUser(formData){api.editProfileInfo(formData).then(function(userData){setCurrentUser(userData);setEditProfilePopupOpen(false);}).catch(function(error){console.log(error);});}function handleUpdateAvatar(formLink){api.editProfilePhoto(formLink).then(function(userData){setCurrentUser(userData);setEditAvatarPopupOpen(false);}).catch(function(error){console.log(error);});}function handleAddPlaceSubmit(cardForm){api.addNewCard(cardForm).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cardsList)));setAddPlacePopupOpen(false);}).catch(function(error){console.log(error);});}function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});});}function handleCardDelete(card){api.deleteCard(card._id).then(function(){setCards(function(cards){return cards.filter(function(c){return c._id!==card._id;});});setDeleteConfirmPopupOpen(false);});}return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{cards:cardsList,onEditAvatar:handleEditAvatarClick,onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onCardClick:handleCardClick,onCardLike:handleCardLike,onCardDelete:handleDeleteButtonClick}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(ConfirmationPopup,{card:selectedCardDelete,isOpen:isDeleteConfirmPopupOpen,onCardDelete:handleCardDelete,onClose:closeAllPopups}),selectedCard&&/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopups})]})})});}export default App;","map":{"version":3,"sources":["/Users/juliatuvaleva/Desktop/dev/mesto-react/src/components/App.js"],"names":["Header","Main","Footer","EditProfilePopup","EditAvatarPopup","AddPlacePopup","ImagePopup","ConfirmationPopup","React","useEffect","useState","CurrentUserContext","api","escKey","App","cardsList","setCards","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isDeleteConfirmPopupOpen","setDeleteConfirmPopupOpen","selectedCard","setSelectedCard","selectedCardDelete","setSelectedCardDelete","currentUser","setCurrentUser","getProfileInfo","then","userData","catch","error","console","log","getInitialCards","cardsData","close","e","keyCode","closeAllPopups","document","addEventListener","removeEventListener","handleEditProfileClick","handleAddPlaceClick","handleEditAvatarClick","handleDeleteButtonClick","card","handleCardClick","handleUpdateUser","formData","editProfileInfo","handleUpdateAvatar","formLink","editProfilePhoto","handleAddPlaceSubmit","cardForm","addNewCard","newCard","handleCardLike","isLiked","likes","some","i","_id","changeLikeCardStatus","state","map","c","handleCardDelete","deleteCard","cards","filter"],"mappings":"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","sourcesContent":["import Header from './Header'\nimport Main from './Main'\nimport Footer from './Footer'\nimport EditProfilePopup from './EditProfilePopup'\nimport EditAvatarPopup from './EditAvatarPopup'\nimport AddPlacePopup from './AddPlacePopup'\nimport ImagePopup from './ImagePopup'\nimport ConfirmationPopup from './ConfirmationPopup'\nimport React, { useEffect, useState } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport {api} from '../utils/api.js';\nimport {escKey} from '../utils/constant.js';\n\nfunction App () {\n  const [cardsList, setCards] = useState([]);\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\n  const [isDeleteConfirmPopupOpen, setDeleteConfirmPopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [selectedCardDelete, setSelectedCardDelete] = useState(null);\n  const [currentUser, setCurrentUser] = useState('');\n\n  useEffect(()=>{\n    api.getProfileInfo()\n      .then((userData) => {\n          setCurrentUser(userData);\n      })\n      .catch( (error) => {\n          console.log(error);\n      });\n\n    api.getInitialCards()\n    .then((cardsData) => {\n        setCards(cardsData);\n      })\n    .catch( (error) => {\n        console.log(error);\n    });\n  }, [])\n  \n  useEffect(() => {\n    const close = (e) => {\n      if(e.keyCode === escKey){\n        closeAllPopups()\n      }\n    }\n    document.addEventListener('keydown', close)\n    return () => document.removeEventListener('keydown', close)\n  },[])\n\n  function handleEditProfileClick () {\n    setEditProfilePopupOpen(true)\n  }\n\n  function handleAddPlaceClick () {\n    setAddPlacePopupOpen(true);\n  }\n\n  function handleEditAvatarClick () {\n    setEditAvatarPopupOpen(true);\n  }\n\n  function handleDeleteButtonClick (card) {\n    setDeleteConfirmPopupOpen(true);\n    setSelectedCardDelete(card);\n  }\n\n  function handleCardClick (card) {\n    setSelectedCard(card);\n  }\n\n  function closeAllPopups() {\n    setEditProfilePopupOpen(false)\n    setAddPlacePopupOpen(false)\n    setEditAvatarPopupOpen(false)\n    setDeleteConfirmPopupOpen(false)\n    setSelectedCard(null)\n    setSelectedCardDelete(null)\n  }\n  \n  function handleUpdateUser (formData) {\n    api.editProfileInfo(formData)\n      .then((userData) => {\n        setCurrentUser(userData);\n        setEditProfilePopupOpen(false)\n       })\n      .catch( (error) => {\n          console.log(error);\n      });\n  }\n\n  function handleUpdateAvatar (formLink) {\n    api.editProfilePhoto(formLink)\n      .then((userData) => {\n        setCurrentUser(userData);\n        setEditAvatarPopupOpen(false)\n       })\n      .catch( (error) => {\n          console.log(error);\n      });\n  }\n\n  function handleAddPlaceSubmit (cardForm) {\n    api.addNewCard(cardForm)\n      .then((newCard) => {\n        setCards([newCard, ...cardsList]);\n        setAddPlacePopupOpen(false)\n       })\n      .catch( (error) => {\n          console.log(error);\n      });\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    \n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n    });\n  } \n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n        .then(() => {\n            setCards((cards) => cards.filter((c) => c._id !== card._id));\n            setDeleteConfirmPopupOpen(false);\n    });\n  }\n  \n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"App\">\n        <div className=\"page\">\n        \n          <Header/>\n\n          <Main \n              cards={cardsList}\n              onEditAvatar={handleEditAvatarClick}\n              onEditProfile={handleEditProfileClick}\n              onAddPlace={handleAddPlaceClick}\n              onCardClick={handleCardClick}\n              onCardLike={handleCardLike}\n              onCardDelete={handleDeleteButtonClick}\n          />\n\n          <Footer/>\n\n          <EditProfilePopup isOpen={isEditProfilePopupOpen} \n                            onClose={closeAllPopups} \n                            onUpdateUser={handleUpdateUser}/>\n\n          <EditAvatarPopup isOpen={isEditAvatarPopupOpen} \n                           onClose={closeAllPopups} \n                           onUpdateAvatar={handleUpdateAvatar}/> \n\n          <AddPlacePopup isOpen={isAddPlacePopupOpen}\n                         onClose={closeAllPopups}\n                         onAddPlace={handleAddPlaceSubmit}/>\n\n          <ConfirmationPopup card = {selectedCardDelete}\n                             isOpen={isDeleteConfirmPopupOpen}\n                             onCardDelete={handleCardDelete}\n                             onClose={closeAllPopups}/>\n\n          {selectedCard &&<ImagePopup card={selectedCard} onClose={closeAllPopups}/>}\n        \n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}