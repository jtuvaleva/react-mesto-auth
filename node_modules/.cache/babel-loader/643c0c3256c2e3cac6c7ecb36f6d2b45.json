{"ast":null,"code":"import _toConsumableArray from\"/Users/juliatuvaleva/Desktop/dev/mestoReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/juliatuvaleva/Desktop/dev/mestoReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import EditProfilePopup from'./EditProfilePopup';import EditAvatarPopup from'./EditAvatarPopup';import AddPlacePopup from'./AddPlacePopup';import ImagePopup from'./ImagePopup';import ConfirmationPopup from'./ConfirmationPopup';import Register from'./Register';import Login from'./Login';import ProtectedRoute from'./ProtectedRoute';import InfoTooltip from'./InfoTooltip';import React,{useEffect,useState}from'react';import{CurrentUserContext}from'../contexts/CurrentUserContext';import{api}from'../utils/api.js';import{escKey}from'../utils/constant.js';import{BrowserRouter,Route,Switch,Redirect}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cardsList=_useState2[0],setCards=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isEditProfilePopupOpen=_useState4[0],setIsEditProfilePopupOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAddPlacePopupOpen=_useState6[0],setIsAddPlacePopupOpen=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isEditAvatarPopupOpen=_useState8[0],setIsEditAvatarPopupOpen=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isDeleteConfirmPopupOpen=_useState10[0],setIsDeleteConfirmPopupOpen=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isImagePopupOpen=_useState12[0],setIsImagePopupOpen=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),selectedCard=_useState14[0],setSelectedCard=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),selectedCardDelete=_useState16[0],setSelectedCardDelete=_useState16[1];var _useState17=useState({}),_useState18=_slicedToArray(_useState17,2),currentUser=_useState18[0],setCurrentUser=_useState18[1];useEffect(function(){api.getProfileInfo().then(function(userData){setCurrentUser(userData);}).catch(function(error){console.log(error);});api.getInitialCards().then(function(cardsData){setCards(cardsData);}).catch(function(error){console.log(error);});},[]);useEffect(function(){var close=function close(e){if(e.keyCode===escKey){closeAllPopups();}};document.addEventListener('keydown',close);return function(){return document.removeEventListener('keydown',close);};},[]);function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}function handleDeleteButtonClick(card){setIsDeleteConfirmPopupOpen(true);setSelectedCardDelete(card);}function handleCardClick(card){setSelectedCard(card);setIsImagePopupOpen(true);}function closeAllPopups(){setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setIsEditAvatarPopupOpen(false);setIsDeleteConfirmPopupOpen(false);setIsImagePopupOpen(false);}function handleUpdateUser(formData){api.editProfileInfo(formData).then(function(userData){setCurrentUser(userData);setIsEditProfilePopupOpen(false);}).catch(function(error){console.log(error);});}function handleUpdateAvatar(formLink){api.editProfilePhoto(formLink).then(function(userData){setCurrentUser(userData);setIsEditAvatarPopupOpen(false);}).catch(function(error){console.log(error);});}function handleAddPlaceSubmit(cardForm){api.addNewCard(cardForm).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cardsList)));setIsAddPlacePopupOpen(false);}).catch(function(error){console.log(error);});}function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(error){console.log(error);});}function handleCardDelete(card){api.deleteCard(card._id).then(function(){setCards(function(cards){return cards.filter(function(c){return c._id!==card._id;});});setIsDeleteConfirmPopupOpen(false);}).catch(function(error){console.log(error);});}return/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/sign-up\",children:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/sign-in\",children:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Main,{exact:true,path:\"/main\",cards:cardsList,onEditAvatar:handleEditAvatarClick,onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onCardClick:handleCardClick,onCardLike:handleCardLike,onCardDelete:handleDeleteButtonClick})]}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(ConfirmationPopup,{card:selectedCardDelete,isOpen:isDeleteConfirmPopupOpen,onCardDelete:handleCardDelete,onClose:closeAllPopups}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,isOpen:isImagePopupOpen,onClose:closeAllPopups}),/*#__PURE__*/_jsx(InfoTooltip,{})]});}export default App;","map":{"version":3,"sources":["/Users/juliatuvaleva/Desktop/dev/mestoReact/src/components/App.js"],"names":["Header","Main","Footer","EditProfilePopup","EditAvatarPopup","AddPlacePopup","ImagePopup","ConfirmationPopup","Register","Login","ProtectedRoute","InfoTooltip","React","useEffect","useState","CurrentUserContext","api","escKey","BrowserRouter","Route","Switch","Redirect","App","cardsList","setCards","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isDeleteConfirmPopupOpen","setIsDeleteConfirmPopupOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","selectedCardDelete","setSelectedCardDelete","currentUser","setCurrentUser","getProfileInfo","then","userData","catch","error","console","log","getInitialCards","cardsData","close","e","keyCode","closeAllPopups","document","addEventListener","removeEventListener","handleEditProfileClick","handleAddPlaceClick","handleEditAvatarClick","handleDeleteButtonClick","card","handleCardClick","handleUpdateUser","formData","editProfileInfo","handleUpdateAvatar","formLink","editProfilePhoto","handleAddPlaceSubmit","cardForm","addNewCard","newCard","handleCardLike","isLiked","likes","some","i","_id","changeLikeCardStatus","state","map","c","handleCardDelete","deleteCard","cards","filter"],"mappings":"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","sourcesContent":["import Header from './Header'\nimport Main from './Main'\nimport Footer from './Footer'\nimport EditProfilePopup from './EditProfilePopup'\nimport EditAvatarPopup from './EditAvatarPopup'\nimport AddPlacePopup from './AddPlacePopup'\nimport ImagePopup from './ImagePopup'\nimport ConfirmationPopup from './ConfirmationPopup'\nimport Register from './Register'\nimport Login from './Login'\nimport ProtectedRoute from './ProtectedRoute'\nimport InfoTooltip from './InfoTooltip'\nimport React, { useEffect, useState } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport {api} from '../utils/api.js';\nimport {escKey} from '../utils/constant.js';\nimport { BrowserRouter, Route, Switch,Redirect } from 'react-router-dom';\n\nfunction App () {\n  const [cardsList, setCards] = useState([]);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isDeleteConfirmPopupOpen, setIsDeleteConfirmPopupOpen] = useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [selectedCardDelete, setSelectedCardDelete] = useState(null);\n  const [currentUser, setCurrentUser] = useState({});\n\n  useEffect(()=>{\n    api.getProfileInfo()\n      .then((userData) => {\n          setCurrentUser(userData);\n      })\n      .catch( (error) => {\n          console.log(error);\n      });\n\n    api.getInitialCards()\n    .then((cardsData) => {\n        setCards(cardsData);\n      })\n    .catch( (error) => {\n        console.log(error);\n    });\n  }, [])\n  \n  useEffect(() => {\n    const close = (e) => {\n      if(e.keyCode === escKey){\n        closeAllPopups()\n      }\n    }\n    document.addEventListener('keydown', close)\n    return () => document.removeEventListener('keydown', close)\n  },[])\n\n  function handleEditProfileClick () {\n    setIsEditProfilePopupOpen(true)\n  }\n\n  function handleAddPlaceClick () {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleEditAvatarClick () {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleDeleteButtonClick (card) {\n    setIsDeleteConfirmPopupOpen(true);\n    setSelectedCardDelete(card);\n  }\n\n  function handleCardClick (card) {\n    setSelectedCard(card);\n    setIsImagePopupOpen(true);   \n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false)\n    setIsAddPlacePopupOpen(false)\n    setIsEditAvatarPopupOpen(false)\n    setIsDeleteConfirmPopupOpen(false)\n    setIsImagePopupOpen(false);\n  }\n  \n  function handleUpdateUser (formData) {\n    api.editProfileInfo(formData)\n      .then((userData) => {\n        setCurrentUser(userData);\n        setIsEditProfilePopupOpen(false)\n       })\n      .catch( (error) => {\n          console.log(error);\n      });\n  }\n\n  function handleUpdateAvatar (formLink) {\n    api.editProfilePhoto(formLink)\n      .then((userData) => {\n        setCurrentUser(userData);\n        setIsEditAvatarPopupOpen(false)\n       })\n      .catch( (error) => {\n          console.log(error);\n      });\n  }\n\n  function handleAddPlaceSubmit (cardForm) {\n    api.addNewCard(cardForm)\n      .then((newCard) => {\n        setCards([newCard, ...cardsList]);\n        setIsAddPlacePopupOpen(false)\n       })\n      .catch( (error) => {\n          console.log(error);\n      });\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    \n    api.changeLikeCardStatus(card._id, !isLiked)\n       .then((newCard) => {\n          setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n        })\n       .catch( (error) => {\n          console.log(error);\n       });\n  } \n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n        .then(() => {\n            setCards((cards) => cards.filter((c) => c._id !== card._id));\n            setIsDeleteConfirmPopupOpen(false);\n        })\n        .catch( (error) => {\n          console.log(error);\n       });\n\n  }\n  \n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n        <Header/>\n\n        <Switch>\n          <Route exact path=\"/sign-up\">\n            <Register />\n          </Route>\n          <Route exact path=\"/sign-in\">\n            <Login />\n          </Route>\n          <Main exact path=\"/main\"\n            cards={cardsList}\n            onEditAvatar={handleEditAvatarClick}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onCardClick={handleCardClick}\n            onCardLike={handleCardLike}\n            onCardDelete={handleDeleteButtonClick}\n        />\n        </Switch>\n        \n\n        <Footer/>\n\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} \n                          onClose={closeAllPopups} \n                          onUpdateUser={handleUpdateUser}/>\n\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} \n                          onClose={closeAllPopups} \n                          onUpdateAvatar={handleUpdateAvatar}/> \n\n        <AddPlacePopup isOpen={isAddPlacePopupOpen}\n                        onClose={closeAllPopups}\n                        onAddPlace={handleAddPlaceSubmit}/>\n\n        <ConfirmationPopup card = {selectedCardDelete}\n                            isOpen={isDeleteConfirmPopupOpen}\n                            onCardDelete={handleCardDelete}\n                            onClose={closeAllPopups}/>\n\n        <ImagePopup card={selectedCard} isOpen={isImagePopupOpen} onClose={closeAllPopups}/>\n\n        \n        <InfoTooltip />\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}